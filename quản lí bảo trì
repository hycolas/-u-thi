<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>C√¥ng ty √Çu Th·ªã - Qu·∫£n l√Ω & B·∫£o tr√¨ H·ªá th·ªëng ƒêi·ªán m·∫∑t tr·ªùi</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    let sites = [
      'Huy H∆∞ng', 'Quang ƒëi·ªán Qu√™ H∆∞∆°ng', 'NƒÉng l∆∞·ª£ng Ph√∫c ƒêi·ªÅn', 'Anh D≈©ng Ph√∫ Gia',
      'NƒÉng l∆∞·ª£ng S∆°n H·∫£i', 'Solar ƒêinh LƒÉng', 'NƒÉng l∆∞·ª£ng AD', 'Quang Mikha',
      'S∆°n H·∫£i Solar', 'NƒÉng l∆∞·ª£ng Qu·ªëc C∆∞·ªùng', 'Kh√°nh T√πng', 'Quang Minh'
    ];

    function filterSites() {
      const filter = document.getElementById('siteFilter').value.toLowerCase();
      const list = document.getElementById('siteList');
      list.innerHTML = '';
      sites.forEach((site, index) => {
        if (site.toLowerCase().includes(filter)) {
          const div = document.createElement('div');
          div.className = 'p-2 border rounded shadow bg-white mb-2 flex justify-between items-center';
          div.innerHTML = `
            <div>
              <input type='text' class='text-lg font-semibold border-b focus:outline-none' value='${site}' onchange='updateSiteName(${index}, this.value)'>
            </div>
            <div>
              <button class='bg-blue-600 text-white px-3 py-1 rounded' onclick='openSiteDetail("${site}")'>Xem chi ti·∫øt</button>
            </div>`;
          list.appendChild(div);
        }
      });
    }

    function updateSiteName(index, newName) {
      sites[index] = newName;
      filterSites();
    }

    function openSiteDetail(siteName) {
      const popup = window.open('', '_blank', 'width=800,height=600');
      popup.document.write(`<!DOCTYPE html><html lang='vi'><head><meta charset='UTF-8'><title>Chi ti·∫øt Site</title>
        <style>
          body { font-family: sans-serif; padding: 20px; }
          .btn { background: #1d4ed8; color: white; padding: 10px 16px; border: none; border-radius: 4px; cursor: pointer; margin: 10px 5px; display: inline-block; }
          .btn:hover { background-color: #2563eb; }
          .section-title { font-size: 18px; margin-top: 20px; margin-bottom: 10px; font-weight: bold; }
        </style>
        <script>
          function showPopup(title, contentHTML) {
            const win = window.open('', '', 'width=700,height=600');
            win.document.write(` + "
              '<!DOCTYPE html><html lang=\'vi\'><head><meta charset=\'UTF-8\'><title>' + title + '</title>' +
              '<style>body{font-family:sans-serif;padding:20px}table{border-collapse:collapse;width:100%}th,td{border:1px solid #ccc;padding:8px;text-align:left}</style>' +
              '</head><body><h2>' + title + '</h2>' + contentHTML + '<br><button onclick=\'window.close()\'>ƒê√≥ng</button></body></html>'
            );
            win.document.close();
          }

          function openDanhSachThietBi() {
            const html = `
              <table>
                <tr><th>Thi·∫øt b·ªã</th><th>Th√¥ng tin</th></tr>
                <tr><td>M√°y bi·∫øn √°p</td><td>Thibidi - 1250kVA - Cung c·∫•p b·ªüi EVN</td></tr>
                <tr><td>T·ªß ph√¢n ph·ªëi</td><td>1 MCCB t·ªïng 2000A (LS), 10 MCCB nh√°nh 200A (LS)</td></tr>
                <tr><td>Inverter</td><td>Huawei 100KTL-M1 x 8 c√°i</td></tr>
              </table>`;
            showPopup('Danh s√°ch thi·∫øt b·ªã', html);
          }

          function openLichBaoTri() {
            const html = `
              <table>
                <tr><th>Ng√†y</th><th>C√¥ng vi·ªác</th><th>Ghi ch√∫</th></tr>
                <tr><td>01/06/2025</td><td>Ki·ªÉm tra inverter</td><td>ƒê·ªãnh k·ª≥ h√†ng th√°ng</td></tr>
                <tr><td>10/06/2025</td><td>V·ªá sinh t·∫•m pin</td><td>2 ng∆∞·ªùi th·ª±c hi·ªán</td></tr>
              </table>`;
            showPopup('L·ªãch b·∫£o tr√¨ ƒë·ªãnh k·ª≥', html);
          }

          function openNhatKyBaoTri() {
            const html = `
              <table>
                <tr><th>STT</th><th>Ng√†y gi·ªù</th><th>Thi·∫øt b·ªã</th><th>T√¨nh tr·∫°ng</th><th>K·∫øt qu·∫£</th><th>Ph·ª• tr√°ch</th></tr>
                <tr><td>1</td><td>15/06/2025 09:30</td><td>Inverter 2</td><td>B√°o l·ªói E101</td><td>ƒê√£ x·ª≠ l√Ω</td><td>K·ªπ s∆∞ Nam</td></tr>
                <tr><td>2</td><td>16/06/2025 13:00</td><td>T·ªß MCCB</td><td>Ti·∫øp x√∫c k√©m</td><td>Si·∫øt l·∫°i</td><td>K·ªπ s∆∞ H√†</td></tr>
              </table>`;
            showPopup('Nh·∫≠t k√Ω b·∫£o tr√¨', html);
          }

          function openTraLoi() {
            const html = `
              <input type='text' placeholder='Nh·∫≠p m√£ l·ªói...' style='padding:8px;width:100%;margin-bottom:10px;'>
              <div>M√£ l·ªói ph·ªï bi·∫øn: <ul><li>E101 - DC th·∫•p</li><li>E405 - M·∫•t AC</li></ul></div>`;
            showPopup('Tra l·ªói thi·∫øt b·ªã', html);
          }
        </script>
        </head><body>
        <h2>üìå Site: ${siteName}</h2>
        <div>
          <button class='btn' onclick='openDanhSachThietBi()'>Danh s√°ch thi·∫øt b·ªã</button>
          <button class='btn' onclick='openLichBaoTri()'>L·ªãch b·∫£o tr√¨ ƒë·ªãnh k·ª≥</button>
          <button class='btn' onclick='openNhatKyBaoTri()'>Nh·∫≠t k√Ω b·∫£o tr√¨</button>
          <button class='btn' onclick='openTraLoi()'>Tra l·ªói thi·∫øt b·ªã</button>
        </div>
        <button onclick='window.close()' class='btn' style='background:#dc2626;'>ƒê√≥ng</button>
      </body></html>`);
      popup.document.close();
    }
  </script>
</head>
<body class="bg-gray-100 p-6">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-2xl font-bold mb-4">C√¥ng ty √Çu Th·ªã - Qu·∫£n l√Ω & B·∫£o tr√¨ H·ªá th·ªëng ƒêi·ªán m·∫∑t tr·ªùi</h1>

    <label class="block mb-2 font-semibold">üîç L·ªçc theo t√™n site:</label>
    <input id="siteFilter" oninput="filterSites()" class="w-full p-2 border rounded mb-4" placeholder="Nh·∫≠p t√™n site...">

    <div id="siteList" class="space-y-2"></div>
  </div>

  <script>
    // Load ban ƒë·∫ßu
    window.onload = filterSites;
  </script>
</body>
</html>
